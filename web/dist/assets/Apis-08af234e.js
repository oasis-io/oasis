/* empty css                  *//* empty css                *//* empty css                    *//* empty css                 */import{d as A,r as o,o as v,c as x,j as h,b as r,w,h as b,ah as C,ai as I,aj as N,L as c,k as V,m as B,ak as E,_ as P}from"./index-95ad95c9.js";const T={class:"clearfix sticky-button"},z={class:"tree-content"},M=A({__name:"Apis",props:{row:{default:function(){return{}},type:Object}},setup(m){const l=m,p=o(null),i=o(""),d=o([]),u=o([]),_=o({children:"children",label:"desc"});(async()=>{const t=(await C()).data.data.apis;d.value=f(t);const e=(await I({name:l.row.name})).data.data.apis;u.value=e})();const f=s=>{let t={};for(let e of s)e.onlyId="p:"+e.path+"m:"+e.method,t[e.group]||(t[e.group]=[]),t[e.group].push(e);let a=[];for(let e in t){const n={ID:e,desc:e+"组",children:t[e]};a.push(n)}return a},y=async()=>{},g=async()=>{const s=p.value.getCheckedNodes(),t=l.row.name,a=s.map(e=>({path:e.path,method:e.method}));try{(await N({name:t,apis:a})).data.code===1e3?c({type:"success",message:"API授权成功!"}):c({type:"error",message:"API授权失败!"})}catch{c({type:"error",message:"API授权失败!"})}};return(s,t)=>{const a=V,e=B,n=E;return v(),x("div",null,[h("div",T,[r(a,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=k=>i.value=k),class:"fitler",placeholder:"search"},null,8,["modelValue"]),r(e,{class:"fl-right",type:"primary",onClick:g},{default:w(()=>[b("确 定")]),_:1})]),h("div",z,[r(n,{ref_key:"treeRef",ref:p,"highlight-current":"","default-expand-all":"","show-checkbox":"","default-checked-keys":u.value,props:_.value,data:d.value,onCheckChange:y},null,8,["default-checked-keys","props","data"])])])}}});const U=P(M,[["__scopeId","data-v-90636634"]]);export{U as default};
