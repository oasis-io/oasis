/* empty css             *//* empty css                *//* empty css                    *//* empty css                  *//* empty css                 */import{d as v,r as a,o as A,c as g,j as _,b as r,w as x,h as w,as as C,at as b,au as I,M as l,k as V,m as B,av as E,_ as M}from"./index-6dee63ee.js";const N={class:"clearfix sticky-button"},P={class:"tree-content"},z=v({__name:"Apis",props:{row:{default:function(){return{}},type:Object}},setup(h){const d=h,i=a(null),p=a(""),u=a([]),m=a([]),f=a({children:"children",label:"desc"});(async()=>{const t=(await C()).data.data;u.value=t;const e=(await b({name:d.row.name})).data.data;m.value=e.flatMap(n=>n.children.map(c=>c.onlyId))})();const y=async()=>{},k=async()=>{const o=i.value.getCheckedNodes(),t=d.row.name,s=o.map(e=>({path:e.path,method:e.method}));try{(await I({name:t,apis:s})).data.code===1e3?l({type:"success",message:"API授权成功!"}):l({type:"error",message:"API授权失败!"})}catch{l({type:"error",message:"API授权失败!"})}};return(o,t)=>{const s=V,e=B,n=E;return A(),g("div",null,[_("div",N,[r(s,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=c=>p.value=c),class:"fitler",placeholder:"search"},null,8,["modelValue"]),r(e,{class:"fl-right",type:"primary",onClick:k},{default:x(()=>[w("确 定")]),_:1})]),_("div",P,[r(n,{ref_key:"treeRef",ref:i,"highlight-current":"","default-expand-all":"","show-checkbox":"","node-key":"onlyId","default-checked-keys":m.value,props:f.value,data:u.value,onCheckChange:y},null,8,["default-checked-keys","props","data"])])])}}});const q=M(z,[["__scopeId","data-v-f7d7ed8a"]]);export{q as default};
